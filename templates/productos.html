<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Gesti√≥n de Productos</title>
</head>
<body>
  <h2>Agregar Producto</h2>
  <form method="POST">
    <label>Nombre:</label><br />
    <input type="text" name="nombre" required /><br />
    <label>Costo:</label><br />
    <input type="number" name="costo" step="0.01" required /><br />
    <label>Ganancia:</label><br />
    <input type="number" name="ganancia" step="0.01" required /><br />
    <label>Marca:</label><br />
    <input type="text" name="marca" required /><br /><br />
    <button type="submit">Guardar Producto</button>
  </form>

  <h2>Lista de Productos (se actualiza cada 5 segundos)</h2>
  <ul id="lista-productos"></ul>

  <script>
    async function cargarProductos() {
      const resp = await fetch('/api/productos');
      const productos = await resp.json();

      const lista = document.getElementById('lista-productos');
      lista.innerHTML = '';

      productos.forEach(p => {
        const item = document.createElement('li');
        const precio = (parseFloat(p.costo) + parseFloat(p.ganancia)).toFixed(2);
        item.textContent = `${p.nombre} - Precio: $${precio} - Marca: ${p.marca}`;
        lista.appendChild(item);
      });
    }

    cargarProductos();
    setInterval(cargarProductos, 5000);
  </script>
</body>
</html>



